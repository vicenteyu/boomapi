# [Dockerfile.fast]
FROM mcr.microsoft.com/dotnet/runtime-deps:10.0-noble-chiseled
WORKDIR /app

# 复制程序并赋权
COPY --chmod=755 ./docker-build/BoomApi ./BoomApi

# 预创建 /data 目录并指定所有者为 chiseled 默认用户 app (UID 1654)
USER 0
RUN mkdir -p /data && chown 1654:1654 /data
VOLUME /data

# 切回非 root 用户运行
USER 1654
EXPOSE 8080
ENTRYPOINT ["./BoomApi"]